# online-library

Это 3 скрипта, первые два скачивают книги с [книжного сайта](https://tululu.org):
1. `parse_tululu.py` скачивает по номерам книги, их обложки и комментарии,
2. `parse_tululu_category.py` скачивает по номерам страниц раздела фантастики книги, их обложки, комментарии и создаёт доп файл формата .json куда помещает информацию по всем скачанным книгам.
3. `render_website.py` прогружает страницу на которой отображает все скачанные книги. Начальная страница: [http://127.0.0.1:5500/pages/index1.html](http://127.0.0.1:5500/pages/index1.html).

## Подготовка к использованию

Скачать гит репозиторий.

Требуется [Python](https://www.python.org/downloads/) версии 3.7 или выше и установленный [pip](https://pip.pypa.io/en/stable/getting-started/). Для установки необходимых зависимостей в корне репозитория используйте команду:  
1. Для Unix/macOs:
```commandline
python -m pip install -r requirements.txt
```
2. Для Windows:
```commandline
py -m pip download --destination-directory DIR -r requirements.txt
```

## Запуск

### скрипт parse_tululu.py

Скрипт запускается как `python3` скрипт с двумя обязательными параметрами:
1. `start_id` - ID книги, с которой начнётся скачивание.
2. `end_id` - ID книги, до которой будет происходить скачивание.

При запуске скачивает книги в папку `books`, комментарии к книгам в папку `books_commentaries`, иззображения обложек книг в `images`. В случае если по очередной книге не будет найдено файлов, в консоль выведется соответствующее оповещение.

Пример запуска:
```comandline
> python3 parse_tululu.py 10 20
book (id=14) was not found
book (id=16) was not found
book (id=17) was not found
```

### скрипт parse_tululu_category.py

Скрипт запускается как `python3` скрипт с шестью необязательными параметрами:
1. `--dest_folder` - Указывает директорию, в которую будет помещены папки с текстами, изображениями и комментариями книг. По умолчанию равна текуще директории.
2. `--start_page` - ID страницы раздела фантастики, с которой начнётся скачивание.
3. `--end_page` - ID страницы раздела фантастики, до которой будет происходить скачивание.
4. `--skip_imgs` - Если использован, то не будет скачиваня изображений книг.
5. `--skip_txt` - Если использован, то не будет скачиваня текстов книг.
6. `--json_path` - устанавливает директорию, в которую будет пощён файл формата .json с информацией по всем скачанным книгам. По умолчанию текущая директория.

При запуске скачивает книги в папку `books`, комментарии к книгам в папку `books_commentaries`, иззображения обложек книг в `images`. В случае если по очередной книге не будет найдено файлов, в консоль выведется соответствующее оповещение.

Пример запуска скрипта, скачивающего книги со страницы 1 по страницу 2 (не включительно) в директорию `./res`, без скачивания изображения, со скачиванием текстов книг, и поместить файл формата .json с информацией по всем скачанным книгам в директорию `./res/json`:
```comandline
> python3 parse_tululu_category.py --start_page 1 --end_page 2 --dest_folder ./res --skip_imgs --json_path ./res/json
book (url=https://tululu.org/b768/, id=2) was not found
book (url=https://tululu.org/b10768/, id=23) was not found
```

### скрипт render_website.py

Скрипт запускается как `python3` скрипт с необязательным параметром:
1. `--json_path` - устанавливает директорию, из которой будет прочитан файл формата .json с информацией по всем скачанным книгам. По умолчанию текущая директория.

При запуске создаёт несколько страниц, на которых отображена информаци по книгам и ссылка на чтение самих книг.

Пример запуска с указанием чтения файла .json из директории "./books":
```comandline
python3 render_website.py --json_path ./books
HTML page was reformed.
HTML page was reformed.
[I 230416 05:42:49 server:335] Serving on http://127.0.0.1:5500
[I 230416 05:42:49 handlers:62] Start watching changes
[I 230416 05:42:49 handlers:64] Start detecting changes
```

Пример внешнего вида сайта:  
![example](./doc/site_example.png)
